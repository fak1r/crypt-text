import{c as ve,i as se,o as B,a as T,h as j,d as ge,j as pe,t as be,R as he,G as ke,ay as $e,H as Ce,az as xe,g as qe,a3 as A,ae,r as b,K as Ke,a4 as g,a5 as q,ab as c,ad as p,a9 as l,af as O,aA as Q,ac as N,ag as L,aB as M,a6 as s,a7 as i,Q as w,aj as X,v as Se,aC as Ve,aD as we,ak as Ie,e as ne,aE as Y,a8 as me,aF as Te,w as z,aG as Z,aH as U,aI as ee,M as G,aJ as te,aK as oe,aL as re,aa as E,aM as Ne}from"./index.3912a8cd.js";import{o as fe,a as ye,d as Qe,b as ue,c as Fe,e as De,u as Oe,Q as Pe}from"./QItem.c2efa29a.js";import"./selection.c47cee6e.js";var Re=ve({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(t,{slots:e}){const{proxy:{$q:r}}=pe(),a=se(be,B);if(a===B)return console.error("QPage needs to be a deep child of QLayout"),B;if(se(he,B)===B)return console.error("QPage needs to be child of QPageContainer"),B;const n=T(()=>{const f=(a.header.space===!0?a.header.size:0)+(a.footer.space===!0?a.footer.size:0);if(typeof t.styleFn=="function"){const d=a.isContainer.value===!0?a.containerHeight.value:r.screen.height;return t.styleFn(f,d)}return{minHeight:a.isContainer.value===!0?a.containerHeight.value-f+"px":r.screen.height===0?f!==0?`calc(100vh - ${f}px)`:"100vh":r.screen.height-f+"px"}}),_=T(()=>`q-page${t.padding===!0?" q-layout-padding":""}`);return()=>j("main",{class:_.value,style:n.value},ge(e.default))}});const Be={xs:2,sm:4,md:6,lg:10,xl:14};function de(t,e,r){return{transform:e===!0?`translateX(${r.lang.rtl===!0?"-":""}100%) scale3d(${-t},1,1)`:`scale3d(${t},1,1)`}}var Le=ve({name:"QLinearProgress",props:{...ke,...$e,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(t,{slots:e}){const{proxy:r}=pe(),a=Ce(t,r.$q),v=xe(t,Be),n=T(()=>t.indeterminate===!0||t.query===!0),_=T(()=>t.reverse!==t.query),f=T(()=>({...v.value!==null?v.value:{},"--q-linear-progress-speed":`${t.animationSpeed}ms`})),d=T(()=>"q-linear-progress"+(t.color!==void 0?` text-${t.color}`:"")+(t.reverse===!0||t.query===!0?" q-linear-progress--reverse":"")+(t.rounded===!0?" rounded-borders":"")),u=T(()=>de(t.buffer!==void 0?t.buffer:1,_.value,r.$q)),y=T(()=>`with${t.instantFeedback===!0?"out":""}-transition`),V=T(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${y.value} q-linear-progress__track--${a.value===!0?"dark":"light"}`+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),F=T(()=>de(n.value===!0?1:t.value,_.value,r.$q)),D=T(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${y.value} q-linear-progress__model--${n.value===!0?"in":""}determinate`),I=T(()=>({width:`${t.value*100}%`})),m=T(()=>`q-linear-progress__stripe absolute-${t.reverse===!0?"right":"left"} q-linear-progress__stripe--${y.value}`);return()=>{const o=[j("div",{class:V.value,style:u.value}),j("div",{class:D.value,style:F.value})];return t.stripe===!0&&n.value===!1&&o.push(j("div",{class:m.value,style:I.value})),j("div",{class:d.value,style:f.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":t.indeterminate===!0?void 0:t.value},qe(e.default,o))}}});const je={class:"parent-container"},Me={class:"child-container"},Ue={class:"h1 text-center"},Ee={class:"q-py-md"},ze={colspan:"16"},Ae={class:"h2"},He={key:0,class:"h2"},We=["onClick"],Ge={class:"no-wrap"},Je={class:"no-wrap"},Xe={colspan:"4"},Ye={class:"h2"},Ze={colspan:"30"},et={class:"alert"},tt={key:0,class:"h2 repeated"},lt={key:1,class:"h2 newRemove"},at={key:2,class:"h2 newAdd"},st=["onClick"],nt={__name:"KeyboardBuilder",setup(t){const e=A(),r=ae(),a=b(e.getCurrentKey);e.$subscribe(()=>{a.value=e.getCurrentKey},{detached:!0});const v=b(e.symbols);let n=b(""),_=b(""),f=b(""),d=!1,u=!1,y="";const V=(C,x)=>Object.keys(x).find(S=>x[S]===C),F=(C,x,S=!1)=>{f.value=!1;const k=V(C,x);if(k?((k===y||y==="")&&(d=!d),k!=y&&d===!1&&(d=!0),y=k,n.value=C,d||(n.value="")):(C===v.value[_.value]?u=!u:u=!0,y=k,_.value=C,u||(_.value="")),S&&Object.values(x).find(K=>K===C)&&Object.values(v.value).find(K=>K===C)?((!d||!u)&&(f.value=!1),(d||u)&&(f.value=!0)):f.value=!1,n.value&&_.value&&!f.value){const K=V(n.value,x);x[K]=_.value,n.value="",_.value="",d=!1,u=!1,f.value=!1,y=""}},D=b(null);fe(D,C=>{n.value="",_.value="",f.value="",y="",d=!1,u=!1});const I=(C,x)=>Object.entries(C).reduce((k,[K,R],H)=>{const W=Math.floor(H/x);return k[W]||(k[W]={}),k[W][K]=R,k},[]);let m=b(16),o=0;const h=()=>{m.value=Math.min(34,16+Math.floor((Math.max(o,450)-450)/54)*2)};Ke(()=>{o=document.querySelector(".parent-container").offsetWidth,h()}),window.addEventListener("resize",()=>{o=document.querySelector(".parent-container").offsetWidth,h()}),document.addEventListener("keydown",C=>{u=!1,f.value=!1,e.onInputFlag||$(a.value,C)});const $=(C,x)=>{if(C[x.key]&&x.ctrlKey===!1&&((x.key===y||y==="")&&(d=!d),x.key!=y&&d===!1&&(d=!0),y=x.key,n.value=C[x.key],d||(n.value="")),x.key==="Escape"&&(n.value="",_.value=""),_.value){const S=V(n.value,C);S&&(C[S]=_.value,n.value="",_.value="",d=!1,u=!1,f.value=!1)}},P=()=>{const C=Object.values(v.value),x=Object.keys(a.value),S=[...C];for(let k=S.length-1;k>0;k--){const K=Math.floor(Math.random()*(k+1));[S[k],S[K]]=[S[K],S[k]]}for(let k=0;k<x.length;k++)a.value[x[k]]=S[k]},_e=()=>{r.user.email&&e.getCurrentKey&&e.currentKeyboardId?(e.saveKeyboardOnServer(),alert(e.lang.alertSaveOnServer)):alert("Please login")};return(C,x)=>(g(),q("div",je,[c("div",Me,[c("div",Ue,p(l(e).lang.builderTitle),1),c("div",Ee,p(l(e).lang.builderText),1),l(e).keysLoaded?Q("",!0):(g(),O(Le,{key:0,class:"q-mb-md",color:"primary",size:"20px",indeterminate:""})),c("table",{ref_key:"tableRef",ref:D},[c("tr",null,[c("td",ze,[c("div",Ae,[N(p(l(e).lang.builderKeyboard)+" ",1),a.value?Q("",!0):(g(),q("span",He,p(l(e).lang.emptyKey),1))])])]),(g(!0),q(L,null,M(I(a.value,l(m)),(S,k)=>(g(),q("tr",{key:k,class:"text-center"},[(g(!0),q(L,null,M(S,(K,R)=>(g(),q("td",{key:R,class:X(["h2",{yellow:l(n)===K,pink:l(n)!==K}]),onClick:H=>F(K,a.value)},[c("div",Ge,p(R)+":",1),c("div",Je,p(K),1)],10,We))),128))]))),128)),c("tr",null,[c("td",Xe,[c("div",Ye,p(l(e).lang.builderSymbols),1)]),c("td",Ze,[c("div",et,[l(f)?(g(),q("div",tt,p(l(e).lang.builderChooseWarning),1)):Q("",!0),l(n)&&!l(f)?(g(),q("div",lt,p(l(e).lang.builderChooseNewSymbol),1)):Q("",!0),l(_)&&!l(f)?(g(),q("div",at,p(l(e).lang.builderChooseOldSymbol),1)):Q("",!0)])])]),(g(!0),q(L,null,M(I(v.value,l(m)),(S,k)=>(g(),q("tr",{key:k,class:"text-center"},[(g(!0),q(L,null,M(S,(K,R)=>(g(),q("td",{key:R,class:X(["h2",{yellow:l(_)===K,blue:l(_)!==K}]),onClick:H=>F(K,a.value,!0)},p(K),11,st))),128))]))),128))],512),s(w,{onClick:P,class:"btn q-mt-md q-mr-md","no-caps":"",disable:!l(e).currentKeyboardId},{default:i(()=>[N(p(l(e).lang.randomizeKey),1)]),_:1},8,["disable"]),l(r).user.email?(g(),O(w,{key:1,onClick:_e,class:"btn q-mt-md","no-caps":"",disable:!l(e).currentKeyboardId},{default:i(()=>[N(p(l(e).lang.btnSaveOnServer),1)]),_:1},8,["disable"])):Q("",!0)])]))}};function ie(t){if(t===!1)return 0;if(t===!0||t===void 0)return 1;const e=parseInt(t,10);return isNaN(e)?0:e}var J=Se({name:"close-popup",beforeMount(t,{value:e}){const r={depth:ie(e),handler(a){r.depth!==0&&setTimeout(()=>{const v=Ve(t);v!==void 0&&we(v,a,r.depth)})},handlerKey(a){Ie(a,13)===!0&&r.handler(a)}};t.__qclosepopup=r,t.addEventListener("click",r.handler),t.addEventListener("keyup",r.handlerKey)},updated(t,{value:e,oldValue:r}){e!==r&&(t.__qclosepopup.depth=ie(e))},beforeUnmount(t){const e=t.__qclosepopup;t.removeEventListener("click",e.handler),t.removeEventListener("keyup",e.handlerKey),delete t.__qclosepopup}});const ot={class:"q-mt-md flex"},le={__name:"InputText",props:{modelValue:{type:String,required:!1},label:{type:String,required:!1,default:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0442\u043E-\u043D\u0438\u0431\u0443\u0434\u044C"},eyeIcon:{type:Boolean,required:!1,default:!1}},emits:["update:modelValue","is-pwd-update","enter-pressed"],setup(t,{emit:e}){const r=b(!1);return(a,v)=>(g(),q(L,null,[s(me,{class:"input","model-value":t.modelValue,"onUpdate:modelValue":v[2]||(v[2]=n=>a.$emit("update:modelValue",n)),color:"deep-purple-5",label:t.label,outlined:"",onKeyup:[v[3]||(v[3]=Y(n=>a.$emit("update:modelValue",""),["esc"])),v[4]||(v[4]=Y(n=>a.$emit("enter-pressed"),["enter"]))],type:r.value?"password":"text"},{append:i(()=>[t.eyeIcon?(g(),O(ne,{key:0,name:r.value?"visibility_off":"visibility",onClick:v[0]||(v[0]=n=>r.value=!r.value),class:"cursor-pointer input-icon"},null,8,["name"])):Q("",!0),s(ne,{onClick:v[1]||(v[1]=n=>a.$emit("update:modelValue","")),class:"cursor-pointer input-icon",name:"close"})]),_:1},8,["model-value","label","type"]),c("div",ot,[Te(a.$slots,"buttons")])],64))}};const rt={class:"parent-container q-pt-md"},ut={class:"child-container"},dt={class:"h1 text-center"},it={class:"q-pt-md"},ct={class:"q-pt-md"},vt={class:"row"},pt={key:0,class:"alert-same-name"},mt={class:"q-ml-sm"},ft={class:"text-h6"},yt={key:0,class:"alert-same-name"},_t={__name:"KeyList",setup(t){const e=A(),r=ae(),a=b(!1),v=b(0),n=b(!1),_=b(0),f=b(""),d=b(""),u=b(""),y=()=>{e.keyboards.find(o=>o.name===d.value)?u.value=e.lang.repeatedKey:(e.createNewKeyboardOnServer(d.value),u.value="",d.value="")},V=o=>{const h=f.value.trim(),$=e.keyboards.find(P=>P.name===h);$&&$.id!==o?u.value=e.lang.repeatedKey:(e.editKeyboardName(o,h),u.value="",n.value=!1)};e.$subscribe(()=>{e.onInputFlag&&(u.value=""),u.value!==""&&(u.value=e.lang.repeatedKey)},{detached:!0}),z(n,o=>{o===!0?(u.value="",e.onInputFlag=!0):(u.value="",e.onInputFlag=!1)});const F=T(()=>o=>o.id===e.currentKeyboardId?"bg-green-2":"bg-orange-2"),D=()=>{r.user.email&&e.deleteKeyboardFromServer(v.value)},I=b(null),{focused:m}=ye(I);return z(m,o=>{o?e.onInputFlag=!0:e.onInputFlag=!1}),(o,h)=>(g(),q("div",rt,[c("div",ut,[c("div",dt,p(l(e).lang.keyListTitle),1),c("div",it,p(l(e).lang.keyListText),1),c("div",ct,[s(De,{separator:"",bordered:""},{default:i(()=>[(g(!0),q(L,null,M(l(e).keyboards,$=>(g(),O(Qe,{class:X(F.value($)),key:$.id},{default:i(()=>[s(ue,{onClick:P=>l(e).currentKeyboardId=$.id},{default:i(()=>[s(Fe,null,{default:i(()=>[N(p($.name),1)]),_:2},1024)]),_:2},1032,["onClick"]),s(ue,{side:""},{default:i(()=>[c("div",vt,[s(w,{color:"blue-5",icon:"edit",flat:"",round:"",dense:"",onClick:P=>(_.value=$.id,n.value=!0,f.value=$.name)},null,8,["onClick"]),s(w,{color:"red-5",icon:"delete",flat:"",round:"",dense:"",onClick:P=>(v.value=$.id,a.value=!0)},null,8,["onClick"])])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1}),c("div",{class:"q-pt-md",ref_key:"inputAddNewRef",ref:I},[u.value&&!n.value?(g(),q("span",pt,p(u.value),1)):Q("",!0),s(le,{modelValue:d.value,"onUpdate:modelValue":h[0]||(h[0]=$=>d.value=$),label:l(e).lang.labelNewKeyboard,onEnterPressed:y},{buttons:i(()=>[s(w,{onClick:y,class:"btn q-mr-md","no-caps":""},{default:i(()=>[N(p(l(e).lang.btnSaveKey),1)]),_:1})]),_:1},8,["modelValue","label"])],512),s(te,{modelValue:a.value,"onUpdate:modelValue":h[2]||(h[2]=$=>a.value=$),persistent:""},{default:i(()=>[s(Z,{class:"modal"},{default:i(()=>[s(U,{class:"row items-center"},{default:i(()=>[c("span",mt,p(l(e).lang.deleteKeyNotice),1)]),_:1}),s(ee,{align:"right"},{default:i(()=>[G(s(w,{flat:"",label:"Cancel","text-color":"black"},null,512),[[J]]),G(s(w,{onClick:h[1]||(h[1]=$=>D()),color:"primary",label:"Delete","text-color":"red",flat:""},null,512),[[J]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(te,{modelValue:n.value,"onUpdate:modelValue":h[6]||(h[6]=$=>n.value=$),persistent:""},{default:i(()=>[s(Z,{class:"modal",style:{"min-width":"350px"}},{default:i(()=>[s(U,null,{default:i(()=>[c("div",ft,p(l(e).lang.editKeyNotice),1)]),_:1}),s(U,{class:"q-pt-none"},{default:i(()=>[s(me,{dense:"",modelValue:f.value,"onUpdate:modelValue":h[3]||(h[3]=$=>f.value=$),autofocus:"",onKeyup:h[4]||(h[4]=Y($=>n.value=!1,["enter"]))},null,8,["modelValue"])]),_:1}),u.value?(g(),q("span",yt,p(u.value),1)):Q("",!0),s(ee,{align:"right",class:"text-black"},{default:i(()=>[G(s(w,{flat:"",label:"Cancel"},null,512),[[J]]),s(w,{flat:"",label:"Save",onClick:h[5]||(h[5]=$=>V(_.value))})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]))}};const gt={class:"text-h6"},bt={class:"h2"},ht={class:"decrypt-copy-tooltip"},ce={__name:"ModalDialog",props:{modelValue:{type:Boolean,required:!0,default:!1},title:{type:String,default:""},text:{type:String,default:""},tooltip:{type:String,default:""}},emits:["update:modelValue","clear-text"],setup(t,{emit:e}){const r=A(),a=t,v=e,n=b(null);fe(n,u=>v("update:modelValue",!1));const{copy:_,copied:f}=Oe({source:a.text}),d=b(!1);return z(f,u=>{u?d.value=!0:d.value=!1}),(u,y)=>(g(),O(te,{persistent:"",modelValue:a.modelValue,"onUpdate:modelValue":y[4]||(y[4]=V=>a.modelValue=V)},{default:i(()=>[s(Z,{ref_key:"clickOutsideRef",ref:n,class:"secret-answer"},{default:i(()=>[s(U,null,{default:i(()=>[c("div",gt,p(a.title),1)]),_:1}),s(oe),s(U,{style:{"max-height":"50vh"},class:"scroll"},{default:i(()=>[c("p",bt,p(t.text),1)]),_:1}),s(oe),s(ee,{align:"right"},{default:i(()=>[c("div",null,[s(w,{onClick:y[0]||(y[0]=V=>l(_)(t.text)),flat:"","no-caps":""},{default:i(()=>[N(p(l(r).lang.btnCopy),1)]),_:1}),c("div",ht,[s(Pe,{modelValue:d.value,"onUpdate:modelValue":y[1]||(y[1]=V=>d.value=V),offset:[0,45],anchor:"top middle",self:"bottom middle"},{default:i(()=>[N(p(l(r).lang.copyTooltip),1)]),_:1},8,["modelValue"])])]),s(w,{onClick:y[2]||(y[2]=V=>u.$emit("clear-text")),flat:"","no-caps":""},{default:i(()=>[N(p(l(r).lang.btnClear),1)]),_:1}),s(w,{flat:"",label:"Ok",onClick:y[3]||(y[3]=V=>u.$emit("update:modelValue",!1))})]),_:1})]),_:1},512)]),_:1},8,["modelValue"]))}};const kt={class:"parent-container q-pt-md"},$t={class:"child-container"},Ct={class:"h1 text-center q-pb-md"},xt={class:"q-pb-md"},qt={class:"q-mb-md"},Kt={key:0,class:"encrypt"},St={class:"q-pb-md q-pr-md"},Vt={class:"q-pr-md q-pb-md"},wt={key:1,class:"decrypt"},It={class:"q-pr-md q-pb-md"},Tt={class:"q-pr-md q-pb-md"},Nt={__name:"CryptDecrypt",setup(t){const e=A();let r=b(""),a=b(""),v=b(""),n=b("");const _=b(!1),f=b(!1),d=b("crypt"),u=b(e.getCurrentKey);e.$subscribe(()=>{u.value=e.getCurrentKey},{detached:!0});const y=()=>{const m=r.value.split(""),o=[];m.forEach(h=>o.push(u.value[h])),v.value=o.join(""),_.value=!0},V=()=>{const I=a.value.split(""),m=[];for(let o=0;o<=I.length;o++)Object.keys(u.value).find(h=>{u.value[h]===I[o]&&m.push(h)});n.value=m.join(""),f.value=!0},F=b(null),{focused:D}=ye(F);return z(D,I=>{I?e.onInputFlag=!0:e.onInputFlag=!1}),(I,m)=>(g(),q("div",kt,[c("div",$t,[c("div",Ct,p(l(e).lang.cryptTitle),1),c("div",xt,p(l(e).lang.cryptText),1),c("div",qt,[s(re,{"keep-color":"",modelValue:d.value,"onUpdate:modelValue":m[0]||(m[0]=o=>d.value=o),val:"crypt",color:"orange"},{default:i(()=>[N(p(l(e).lang.btnCrypt),1)]),_:1},8,["modelValue"]),s(re,{"keep-color":"",modelValue:d.value,"onUpdate:modelValue":m[1]||(m[1]=o=>d.value=o),val:"decrypt",color:"purple"},{default:i(()=>[N(p(l(e).lang.btnDecrypt),1)]),_:1},8,["modelValue"])]),c("div",{class:"crypt-decrypt",ref_key:"cryptedRef",ref:F},[d.value==="crypt"?(g(),q("div",Kt,[s(le,{modelValue:l(r),"onUpdate:modelValue":m[3]||(m[3]=o=>E(r)?r.value=o:r=o),label:l(e).lang.labelCrypt,"eye-icon":!0,onEnterPressed:y},{buttons:i(()=>[c("div",St,[s(w,{onClick:y,class:"btn",disabled:!l(r),"no-caps":""},{default:i(()=>[N(p(l(e).lang.btnCrypt),1)]),_:1},8,["disabled"])]),c("div",Vt,[s(w,{class:"btn",disabled:!l(v),onClick:m[2]||(m[2]=o=>_.value=!0),"no-caps":""},{default:i(()=>[N(p(l(e).lang.btnShowResult),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue","label"]),s(ce,{modelValue:_.value,"onUpdate:modelValue":m[4]||(m[4]=o=>_.value=o),title:l(e).lang.popupCryptTitle,text:l(v),tooltip:"Crypt",onClearText:m[5]||(m[5]=o=>E(v)?v.value="":v="")},null,8,["modelValue","title","text"])])):(g(),q("div",wt,[s(le,{modelValue:l(a),"onUpdate:modelValue":m[7]||(m[7]=o=>E(a)?a.value=o:a=o),label:l(e).lang.labelDecrypt,"eye-icon":!0,onEnterPressed:V},{buttons:i(()=>[c("div",It,[s(w,{onClick:V,class:"btn",disabled:!l(a),"no-caps":""},{default:i(()=>[N(p(l(e).lang.btnDecrypt),1)]),_:1},8,["disabled"])]),c("div",Tt,[s(w,{class:"btn",disabled:!l(n),onClick:m[6]||(m[6]=o=>f.value=!0),"no-caps":""},{default:i(()=>[N(p(l(e).lang.btnShowResult),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue","label"]),s(ce,{modelValue:f.value,"onUpdate:modelValue":m[8]||(m[8]=o=>f.value=o),title:l(e).lang.popupDecryptTitle,text:l(n),onClearText:m[9]||(m[9]=o=>E(n)?n.value="":n="")},null,8,["modelValue","title","text"])]))],512)])]))}},Ot={__name:"IndexPage",setup(t){const e=ae();return Ne({name:"IndexPage"}),(r,a)=>(g(),O(Re,{class:"flex flex-center",style:{"min-height":"0"}},{default:i(()=>[l(e).user.email?(g(),O(_t,{key:0})):Q("",!0),s(Nt),s(nt)]),_:1}))}};export{Ot as default};
