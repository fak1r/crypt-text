import{c as fe,i as oe,o as L,a as T,h as j,d as ge,j as me,t as be,R as he,G as ke,ay as $e,H as Ce,az as xe,g as Ke,a3 as G,ae as J,r as y,K as Ve,a4 as b,a5 as V,ab as i,ad as f,a9 as t,af as P,aA as O,ac as N,ag as M,aB as z,a6 as s,a7 as c,Q as w,aj as W,v as qe,aC as Se,aD as we,ak as Ie,w as H,aE as E,a8 as te,aF as le,aG as U,aH as ae,M as Z,aI as se,aJ as re,e as ne,aK as Ne,aL as ue,aa as A,aM as Te}from"./index.c2939e3d.js";import{o as ye,a as _e,d as Re,b as de,c as Qe,e as De,u as Fe,Q as Oe}from"./QItem.67754b32.js";import"./selection.fc1ee504.js";var Pe=fe({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(l,{slots:e}){const{proxy:{$q:u}}=me(),a=oe(be,L);if(a===L)return console.error("QPage needs to be a deep child of QLayout"),L;if(oe(he,L)===L)return console.error("QPage needs to be child of QPageContainer"),L;const o=T(()=>{const v=(a.header.space===!0?a.header.size:0)+(a.footer.space===!0?a.footer.size:0);if(typeof l.styleFn=="function"){const d=a.isContainer.value===!0?a.containerHeight.value:u.screen.height;return l.styleFn(v,d)}return{minHeight:a.isContainer.value===!0?a.containerHeight.value-v+"px":u.screen.height===0?v!==0?`calc(100vh - ${v}px)`:"100vh":u.screen.height-v+"px"}}),m=T(()=>`q-page${l.padding===!0?" q-layout-padding":""}`);return()=>j("main",{class:m.value,style:o.value},ge(e.default))}});const Be={xs:2,sm:4,md:6,lg:10,xl:14};function ie(l,e,u){return{transform:e===!0?`translateX(${u.lang.rtl===!0?"-":""}100%) scale3d(${-l},1,1)`:`scale3d(${l},1,1)`}}var Le=fe({name:"QLinearProgress",props:{...ke,...$e,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(l,{slots:e}){const{proxy:u}=me(),a=Ce(l,u.$q),_=xe(l,Be),o=T(()=>l.indeterminate===!0||l.query===!0),m=T(()=>l.reverse!==l.query),v=T(()=>({..._.value!==null?_.value:{},"--q-linear-progress-speed":`${l.animationSpeed}ms`})),d=T(()=>"q-linear-progress"+(l.color!==void 0?` text-${l.color}`:"")+(l.reverse===!0||l.query===!0?" q-linear-progress--reverse":"")+(l.rounded===!0?" rounded-borders":"")),k=T(()=>ie(l.buffer!==void 0?l.buffer:1,m.value,u.$q)),r=T(()=>`with${l.instantFeedback===!0?"out":""}-transition`),x=T(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${r.value} q-linear-progress__track--${a.value===!0?"dark":"light"}`+(l.trackColor!==void 0?` bg-${l.trackColor}`:"")),Q=T(()=>ie(o.value===!0?1:l.value,m.value,u.$q)),R=T(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${r.value} q-linear-progress__model--${o.value===!0?"in":""}determinate`),D=T(()=>({width:`${l.value*100}%`})),F=T(()=>`q-linear-progress__stripe absolute-${l.reverse===!0?"right":"left"} q-linear-progress__stripe--${r.value}`);return()=>{const I=[j("div",{class:x.value,style:k.value}),j("div",{class:R.value,style:Q.value})];return l.stripe===!0&&o.value===!1&&I.push(j("div",{class:F.value,style:D.value})),j("div",{class:d.value,style:v.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":l.indeterminate===!0?void 0:l.value},Ke(e.default,I))}}});const Me={class:"parent-container"},je={class:"child-container"},ze={class:"h1 text-center"},Ee={class:"q-py-md"},Ue={colspan:"16"},Ae={class:"h2"},We={key:0,class:"h2"},He=["onClick"],Ge={class:"no-wrap"},Je={class:"no-wrap"},Xe={colspan:"4"},Ye={class:"h2"},Ze={colspan:"30"},et={class:"alert"},tt={key:0,class:"h2 repeated"},lt={key:1,class:"h2 newRemove"},at={key:2,class:"h2 newAdd"},st=["onClick"],nt={__name:"KeyboardBuilder",setup(l){const e=G(),u=J(),a=y(e.getCurrentKey);e.$subscribe(()=>{a.value=e.getCurrentKey},{detached:!0});const _=y(e.symbols);let o=y(""),m=y(""),v=y(""),d=!1,k=!1,r="";const x=(n,h)=>Object.keys(h).find(S=>h[S]===n),Q=(n,h,S=!1)=>{v.value=!1;const $=x(n,h);if($?(($===r||r==="")&&(d=!d),$!=r&&d===!1&&(d=!0),r=$,o.value=n,d||(o.value="")):(n===_.value[m.value]?k=!k:k=!0,r=$,m.value=n,k||(m.value="")),S&&Object.values(h).find(K=>K===n)&&Object.values(_.value).find(K=>K===n)?((!d||!k)&&(v.value=!1),(d||k)&&(v.value=!0)):v.value=!1,o.value&&m.value&&!v.value){const K=x(o.value,h);h[K]=m.value,o.value="",m.value="",d=!1,k=!1,v.value=!1,r=""}},R=y(null);ye(R,()=>{o.value="",m.value="",v.value="",r="",d=!1,k=!1});const D=(n,h)=>Object.entries(n).reduce(($,[K,B],X)=>{const Y=Math.floor(X/h);return $[Y]||($[Y]={}),$[Y][K]=B,$},[]);let F=y(16),I=0;const p=()=>{F.value=Math.min(34,16+Math.floor((Math.max(I,450)-450)/54)*2)};Ve(()=>{I=document.querySelector(".parent-container").offsetWidth,p()}),window.addEventListener("resize",()=>{I=document.querySelector(".parent-container").offsetWidth,p()}),document.addEventListener("keydown",n=>{k=!1,v.value=!1,e.onInputFlag||g(a.value,n)});const g=(n,h)=>{if(n[h.key]&&h.ctrlKey===!1&&((h.key===r||r==="")&&(d=!d),h.key!=r&&d===!1&&(d=!0),r=h.key,o.value=n[h.key],d||(o.value="")),h.key==="Escape"&&(o.value="",m.value=""),m.value){const S=x(o.value,n);S&&(n[S]=m.value,o.value="",m.value="",d=!1,k=!1,v.value=!1)}},q=()=>{const n=Object.values(_.value),h=Object.keys(a.value),S=[...n];for(let $=S.length-1;$>0;$--){const K=Math.floor(Math.random()*($+1));[S[$],S[K]]=[S[K],S[$]]}for(let $=0;$<h.length;$++)a.value[h[$]]=S[$]},C=()=>{u.user.email&&e.getCurrentKey&&e.currentKeyboardId?e.saveKeyboardOnServer():alert("Please login")};return(n,h)=>(b(),V("div",Me,[i("div",je,[i("div",ze,f(t(e).lang.builderTitle),1),i("div",Ee,f(t(e).lang.builderText),1),t(e).keysLoaded?O("",!0):(b(),P(Le,{key:0,class:"q-mb-md",color:"primary",size:"20px",indeterminate:""})),i("table",{ref_key:"tableRef",ref:R},[i("tr",null,[i("td",Ue,[i("div",Ae,[N(f(t(e).lang.builderKeyboard)+" ",1),a.value?O("",!0):(b(),V("span",We,f(t(e).lang.emptyKey),1))])])]),(b(!0),V(M,null,z(D(a.value,t(F)),(S,$)=>(b(),V("tr",{key:$,class:"text-center"},[(b(!0),V(M,null,z(S,(K,B)=>(b(),V("td",{key:B,class:W(["h2",{yellow:t(o)===K,pink:t(o)!==K}]),onClick:X=>Q(K,a.value)},[i("div",Ge,f(B)+":",1),i("div",Je,f(K),1)],10,He))),128))]))),128)),i("tr",null,[i("td",Xe,[i("div",Ye,f(t(e).lang.builderSymbols),1)]),i("td",Ze,[i("div",et,[t(v)?(b(),V("div",tt,f(t(e).lang.builderChooseWarning),1)):O("",!0),t(o)&&!t(v)?(b(),V("div",lt,f(t(e).lang.builderChooseNewSymbol),1)):O("",!0),t(m)&&!t(v)?(b(),V("div",at,f(t(e).lang.builderChooseOldSymbol),1)):O("",!0)])])]),(b(!0),V(M,null,z(D(_.value,t(F)),(S,$)=>(b(),V("tr",{key:$,class:"text-center"},[(b(!0),V(M,null,z(S,(K,B)=>(b(),V("td",{key:B,class:W(["h2",{yellow:t(m)===K,blue:t(m)!==K}]),onClick:X=>Q(K,a.value,!0)},f(K),11,st))),128))]))),128))],512),s(w,{onClick:q,class:"btn q-mt-md q-mr-md","no-caps":"",disable:!t(e).currentKeyboardId},{default:c(()=>[N(f(t(e).lang.randomizeKey),1)]),_:1},8,["disable"]),t(u).user.email?(b(),P(w,{key:1,onClick:C,class:"btn q-mt-md","no-caps":"",disable:!t(e).currentKeyboardId},{default:c(()=>[N(f(t(e).lang.btnSaveOnServer),1)]),_:1},8,["disable"])):O("",!0)])]))}};function ce(l){if(l===!1)return 0;if(l===!0||l===void 0)return 1;const e=parseInt(l,10);return isNaN(e)?0:e}var ee=qe({name:"close-popup",beforeMount(l,{value:e}){const u={depth:ce(e),handler(a){u.depth!==0&&setTimeout(()=>{const _=Se(l);_!==void 0&&we(_,a,u.depth)})},handlerKey(a){Ie(a,13)===!0&&u.handler(a)}};l.__qclosepopup=u,l.addEventListener("click",u.handler),l.addEventListener("keyup",u.handlerKey)},updated(l,{value:e,oldValue:u}){e!==u&&(l.__qclosepopup.depth=ce(e))},beforeUnmount(l){const e=l.__qclosepopup;l.removeEventListener("click",e.handler),l.removeEventListener("keyup",e.handlerKey),delete l.__qclosepopup}});const ot={class:"parent-container q-pt-md"},rt={class:"child-container"},ut={class:"h1 text-center"},dt={class:"q-pt-md"},it={class:"q-pt-md"},ct={class:"row"},vt={class:"q-ml-sm"},pt={class:"text-h6"},ft={__name:"KeyList",setup(l){const e=G(),u=J(),a=y(!1),_=y(0),o=y(!1),m=y(0),v=y(""),d=y(""),k=y(null),r=y(""),x=(q,C)=>{let n=!0;return o.value||(r.value="q-mt-md"),e.keyboards.find(h=>h.name===C.trim())&&(n=!1),String(q).trim().match(/^.+/)&&n},Q=()=>{const q=d.value.trim();k.value.validate(),k.value.hasError||(e.createNewKeyboardOnServer(q),d.value="",k.value.resetValidation(),r.value="")},R=y(null),D=q=>{const C=v.value.trim();R.value.validate(),R.value.hasError||(e.editKeyboardName(q,C),o.value=!1,R.value.resetValidation())},F=T(()=>q=>q.id===e.currentKeyboardId?"bg-green-2":"bg-orange-2"),I=()=>{u.user.email&&e.deleteKeyboardFromServer(_.value)},p=y(null),{focused:g}=_e(p);return H(g,q=>{q?e.onInputFlag=!0:e.onInputFlag=!1}),H(o,q=>{q===!0?e.onInputFlag=!0:(e.onInputFlag=!1,r.value="")}),(q,C)=>(b(),V("div",ot,[i("div",rt,[i("div",ut,f(t(e).lang.keyListTitle),1),i("div",dt,f(t(e).lang.keyListText),1),i("div",it,[s(De,{separator:"",bordered:""},{default:c(()=>[(b(!0),V(M,null,z(t(e).keyboards,n=>(b(),P(Re,{class:W(F.value(n)),key:n.id},{default:c(()=>[s(de,{onClick:h=>t(e).currentKeyboardId=n.id},{default:c(()=>[s(Qe,null,{default:c(()=>[N(f(n.name),1)]),_:2},1024)]),_:2},1032,["onClick"]),s(de,{side:""},{default:c(()=>[i("div",ct,[s(w,{color:"blue-5",icon:"edit",flat:"",round:"",dense:"",onClick:h=>(m.value=n.id,o.value=!0,v.value=n.name)},null,8,["onClick"]),s(w,{color:"red-5",icon:"delete",flat:"",round:"",dense:"",onClick:h=>(_.value=n.id,a.value=!0)},null,8,["onClick"])])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1}),i("div",{class:"q-pt-md",ref_key:"inputAddNewRef",ref:p},[s(te,{class:"input",modelValue:d.value,"onUpdate:modelValue":C[0]||(C[0]=n=>d.value=n),color:"deep-purple-5",label:t(e).lang.labelNewKeyboard,outlined:"",ref_key:"newKeyRef",ref:k,onKeyup:[C[1]||(C[1]=E(n=>d.value="",["esc"])),E(Q,["enter"])],"no-caps":"",rules:[n=>x(n,d.value)||t(e).lang.newKeyNameValidation],"lazy-rules":""},null,8,["modelValue","label","onKeyup","rules"]),s(w,{onClick:Q,class:W(["btn",r.value]),"no-caps":""},{default:c(()=>[N(f(t(e).lang.btnSaveKey),1)]),_:1},8,["class"])],512),s(se,{modelValue:a.value,"onUpdate:modelValue":C[3]||(C[3]=n=>a.value=n),persistent:""},{default:c(()=>[s(le,{class:"modal"},{default:c(()=>[s(U,{class:"row items-center"},{default:c(()=>[i("span",vt,f(t(e).lang.deleteKeyNotice),1)]),_:1}),s(ae,{align:"right"},{default:c(()=>[Z(s(w,{flat:"",label:"Cancel","text-color":"black"},null,512),[[ee]]),Z(s(w,{onClick:C[2]||(C[2]=n=>I()),color:"primary",label:"Delete","text-color":"red",flat:""},null,512),[[ee]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(se,{modelValue:o.value,"onUpdate:modelValue":C[7]||(C[7]=n=>o.value=n),persistent:""},{default:c(()=>[s(le,{class:"modal",style:{"min-width":"350px"}},{default:c(()=>[s(U,null,{default:c(()=>[i("div",pt,f(t(e).lang.editKeyNotice),1)]),_:1}),s(U,{class:"q-pt-none"},{default:c(()=>[s(te,{modelValue:v.value,"onUpdate:modelValue":C[4]||(C[4]=n=>v.value=n),onKeyup:C[5]||(C[5]=E(n=>o.value=!1,["enter"])),dense:"",ref_key:"editNameKeyRef",ref:R,rules:[n=>x(n,v.value)||t(e).lang.newKeyNameValidation],"lazy-rules":""},null,8,["modelValue","rules"])]),_:1}),s(ae,{align:"right",class:"text-black"},{default:c(()=>[Z(s(w,{flat:"",label:"Cancel"},null,512),[[ee]]),s(w,{flat:"",label:"Save",onClick:C[6]||(C[6]=n=>D(m.value))})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]))}};const mt={class:"text-h6"},yt={class:"h2"},_t={class:"decrypt-copy-tooltip"},ve={__name:"ModalDialog",props:{modelValue:{type:Boolean,required:!0,default:!1},title:{type:String,default:""},text:{type:String,default:""},tooltip:{type:String,default:""}},emits:["update:modelValue","clear-text"],setup(l,{emit:e}){const u=G(),a=l,_=e,o=y(null);ye(o,()=>_("update:modelValue",!1));const{copy:m,copied:v}=Fe({source:a.text}),d=y(!1);return H(v,k=>{k?d.value=!0:d.value=!1}),(k,r)=>(b(),P(se,{persistent:"",modelValue:a.modelValue,"onUpdate:modelValue":r[4]||(r[4]=x=>a.modelValue=x)},{default:c(()=>[s(le,{ref_key:"clickOutsideRef",ref:o,class:"secret-answer"},{default:c(()=>[s(U,null,{default:c(()=>[i("div",mt,f(a.title),1)]),_:1}),s(re),s(U,{style:{"max-height":"50vh"},class:"scroll"},{default:c(()=>[i("p",yt,f(l.text),1)]),_:1}),s(re),s(ae,{align:"right"},{default:c(()=>[i("div",null,[s(w,{onClick:r[0]||(r[0]=x=>t(m)(l.text)),flat:"","no-caps":""},{default:c(()=>[N(f(t(u).lang.btnCopy),1)]),_:1}),i("div",_t,[s(Oe,{modelValue:d.value,"onUpdate:modelValue":r[1]||(r[1]=x=>d.value=x),offset:[0,45],anchor:"top middle",self:"bottom middle"},{default:c(()=>[N(f(t(u).lang.copyTooltip),1)]),_:1},8,["modelValue"])])]),s(w,{onClick:r[2]||(r[2]=x=>k.$emit("clear-text")),flat:"","no-caps":""},{default:c(()=>[N(f(t(u).lang.btnClear),1)]),_:1}),s(w,{flat:"",label:"Ok",onClick:r[3]||(r[3]=x=>k.$emit("update:modelValue",!1))})]),_:1})]),_:1},512)]),_:1},8,["modelValue"]))}};const gt={class:"q-mt-md flex"},pe={__name:"InputText",props:{modelValue:{type:String,required:!1},label:{type:String,required:!1,default:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0442\u043E-\u043D\u0438\u0431\u0443\u0434\u044C"},eyeIcon:{type:Boolean,required:!1,default:!1}},emits:["update:modelValue","is-pwd-update","enter-pressed"],setup(l){const e=y(!1);return(u,a)=>(b(),V(M,null,[s(te,{class:"input","model-value":l.modelValue,"onUpdate:modelValue":a[2]||(a[2]=_=>u.$emit("update:modelValue",_)),color:"deep-purple-5",label:l.label,outlined:"",onKeyup:[a[3]||(a[3]=E(_=>u.$emit("update:modelValue",""),["esc"])),a[4]||(a[4]=E(_=>u.$emit("enter-pressed"),["enter"]))],type:e.value?"password":"text"},{append:c(()=>[l.eyeIcon?(b(),P(ne,{key:0,name:e.value?"visibility_off":"visibility",onClick:a[0]||(a[0]=_=>e.value=!e.value),class:"cursor-pointer input-icon"},null,8,["name"])):O("",!0),s(ne,{onClick:a[1]||(a[1]=_=>u.$emit("update:modelValue","")),class:"cursor-pointer input-icon",name:"close"})]),_:1},8,["model-value","label","type"]),i("div",gt,[Ne(u.$slots,"buttons")])],64))}};const bt={class:"parent-container q-pt-md"},ht={class:"child-container"},kt={class:"h1 text-center q-pb-md"},$t={key:0,class:"q-mb-md auth-alert"},Ct={class:"q-pb-md"},xt={class:"q-mb-md"},Kt={key:0,class:"encrypt"},Vt={class:"q-pb-md q-pr-md"},qt={class:"q-pr-md q-pb-md"},St={key:1,class:"decrypt"},wt={class:"q-pr-md q-pb-md"},It={class:"q-pr-md q-pb-md"},Nt={__name:"CryptDecrypt",setup(l){const e=G(),u=J();let a=y(""),_=y(""),o=y(""),m=y("");const v=y(!1),d=y(!1),k=y(!0),r=y("crypt"),x=y(e.getCurrentKey);e.$subscribe(()=>{x.value=e.getCurrentKey},{detached:!0});const Q=()=>{const p=a.value.split(""),g=[];p.forEach(q=>g.push(x.value[q])),o.value=g.join(""),v.value=!0},R=()=>{const I=_.value.split(""),p=[];for(let g=0;g<=I.length;g++)Object.keys(x.value).find(q=>{x.value[q]===I[g]&&p.push(q)});m.value=p.join(""),d.value=!0},D=y(null),{focused:F}=_e(D);return H(F,I=>{I?e.onInputFlag=!0:e.onInputFlag=!1}),(I,p)=>(b(),V("div",bt,[i("div",ht,[i("div",kt,f(t(e).lang.cryptTitle),1),!t(u).user.email&&k.value?(b(),V("div",$t,[N(f(t(e).lang.authAlert)+" ",1),s(ne,{onClick:p[0]||(p[0]=g=>k.value=!1),class:"close-icon",name:"close",size:"24px"})])):O("",!0),i("div",Ct,f(t(e).lang.cryptText),1),i("div",xt,[s(ue,{"keep-color":"",modelValue:r.value,"onUpdate:modelValue":p[1]||(p[1]=g=>r.value=g),val:"crypt",color:"orange"},{default:c(()=>[N(f(t(e).lang.btnCrypt),1)]),_:1},8,["modelValue"]),s(ue,{"keep-color":"",modelValue:r.value,"onUpdate:modelValue":p[2]||(p[2]=g=>r.value=g),val:"decrypt",color:"purple"},{default:c(()=>[N(f(t(e).lang.btnDecrypt),1)]),_:1},8,["modelValue"])]),i("div",{class:"crypt-decrypt",ref_key:"cryptedRef",ref:D},[r.value==="crypt"?(b(),V("div",Kt,[s(pe,{modelValue:t(a),"onUpdate:modelValue":p[4]||(p[4]=g=>A(a)?a.value=g:a=g),label:t(e).lang.labelCrypt,"eye-icon":!0,onEnterPressed:Q},{buttons:c(()=>[i("div",Vt,[s(w,{onClick:Q,class:"btn",disabled:!t(a),"no-caps":""},{default:c(()=>[N(f(t(e).lang.btnCrypt),1)]),_:1},8,["disabled"])]),i("div",qt,[s(w,{class:"btn",disabled:!t(o),onClick:p[3]||(p[3]=g=>v.value=!0),"no-caps":""},{default:c(()=>[N(f(t(e).lang.btnShowResult),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue","label"]),s(ve,{modelValue:v.value,"onUpdate:modelValue":p[5]||(p[5]=g=>v.value=g),title:t(e).lang.popupCryptTitle,text:t(o),tooltip:"Crypt",onClearText:p[6]||(p[6]=g=>A(o)?o.value="":o="")},null,8,["modelValue","title","text"])])):(b(),V("div",St,[s(pe,{modelValue:t(_),"onUpdate:modelValue":p[8]||(p[8]=g=>A(_)?_.value=g:_=g),label:t(e).lang.labelDecrypt,"eye-icon":!0,onEnterPressed:R},{buttons:c(()=>[i("div",wt,[s(w,{onClick:R,class:"btn",disabled:!t(_),"no-caps":""},{default:c(()=>[N(f(t(e).lang.btnDecrypt),1)]),_:1},8,["disabled"])]),i("div",It,[s(w,{class:"btn",disabled:!t(m),onClick:p[7]||(p[7]=g=>d.value=!0),"no-caps":""},{default:c(()=>[N(f(t(e).lang.btnShowResult),1)]),_:1},8,["disabled"])])]),_:1},8,["modelValue","label"]),s(ve,{modelValue:d.value,"onUpdate:modelValue":p[9]||(p[9]=g=>d.value=g),title:t(e).lang.popupDecryptTitle,text:t(m),onClearText:p[10]||(p[10]=g=>A(m)?m.value="":m="")},null,8,["modelValue","title","text"])]))],512)])]))}},Dt={__name:"IndexPage",setup(l){const e=J();return Te({name:"IndexPage"}),(u,a)=>(b(),P(Pe,{class:"flex flex-center",style:{"min-height":"0"}},{default:c(()=>[t(e).user.email?(b(),P(ft,{key:0})):O("",!0),s(Nt),s(nt)]),_:1}))}};export{Dt as default};
